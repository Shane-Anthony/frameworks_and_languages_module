<html>

<head>

   <meta charset="utf-8" />
   <link id="favicon" rel="shortcut icon" type="image/png" href="data:image/png;base64,....==" />
   <title>FreeCycle</title>

   <style>
    body {
        background-color: B0B0AF;
    }
    .panel {
        position: absolute;
        width: 50vw;
        height: 1024px;
        left: 0px;
        top: 0px;
        padding: auto;
        
        background: #434444;   
    }
    .titlebar {
        margin:auto;
        position: absolute;
        width: 40vw;
        height: 90px;
        left: 10%;
        right: 49vw;
        top: 20px;
        text-align: center;

        background: #B64C2A;
        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
        border-radius: 55px;
    }
    .title{
        margin:auto;
        position: absolute;
        left: 25%;
        right: 25%;

        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-size: 1em;
        line-height: 48px;

        color: #FFFFFF;
    }
    .left-bar {
        position: absolute;
        padding: 5%;
        top: 30vh;
        width: 50vw;
        left:0em;
        right: 50vw;

    }
    .text{
        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-size: 1em;
        line-height: 48px;

        color: #FFFFFF;
    }
    .right-bar {
        position: absolute;
        padding: 5%;
        top: 30vh;
        width: 50vw;
        left: 50vw;
        right:100vw;
    }
    </style>

   <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>

   
   <div class="panel">
    <div class="titlebar">
        <div class="title">
            <h1>FreeCycle</h1>
        </div>
    </div>
        
        <div id="app">
            <div class="left-bar">
                <div class="text">
                    {{ message }}
                    <form @submit.prevent="addItem">
                        <input v-model="item.item" name="item" type="text" placeholder="Input Item">
                        <input v-model="item.location" name="location" type="text" placeholder="Input Username">
                        <button>Submit</button>
                    </form>
                </div>
                
            </div>
            
            <div class="right-bar">
                <div class="text">
                    <ul>
                        <li v-for="item in items">

                            <span>{{item.userid}}</span>
                            <span>{{item.description}}</span>
                            <span>{{item.image}}</span>
                            <span>{{item.lat}}</span>
                            <span>{{item.lon}}</span>
                            <span>{{item.keywords}}</span>

                        </li>

                    </ul>
                </div>
                
            </div>
            
        </div>
    </div>
   

<script type="module">

const { createApp } = Vue

let urlAPI = '' 

createApp({
    data() {
        return {
            item: {
                id:'',
                user: '',
                description:'',
                image:'',
                lat: '',
                lon: '',
                keywords:'',
            },


            items: [

                {"id":0.6245638,"user":"Test1","description":"Test1", "image":"Test1", "lat":"Test1", "lon": "TEST1", "keywords":"Test1" },
                {"id":0.36347428,"user":"Test2","description":"Test2", "image":"Test2", "lat":"Test2", "lon": "TEST2", "keywords":"Test2" },

            ],

            message: 'Hello Vue!',

        }

    },

    created() {


        this.clearItem()
        this.getItems()

    },

    methods: {

    clearItem() {

        this.item = {...this.item, ...{
            
            id: Math.random(),
            user:'',
            description: '',
            image: '',
            lat: '',
            lon: '',
            keywords: '',

        }}

    },

   addItem() {

        fetch(`${urlAPI}/item/`, {

            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(this.item),

        })

        .then(response => response.json())
        .then(json => console.log('addItem()', json))
        .then(this.clearItem)
        .then(this.getItems)
        .catch(err => console.error(err));

    },

   getItems() {

        fetch(`${urlAPI}/items`, {

            method: 'GET',
        })

        .then(response => response.json())
        .then(data => this.items = data)
        .catch(err => console.error(err))

    }

 }

}).mount('#app')



</script>

</body>

</html>